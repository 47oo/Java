### 简单的HTTP协议
+ HTTP协议用于客户端和服务器端之间的通信
  > HTTP协议和TCP/IP协议族内的其他众多的协议相同,用户客户端和服务器之间的通信.

  > 请求访问文本或图像等资源的一端称为客户端,而提供资源响应的一段称为服务器端.
  ![](/images/http10.png)
  > 两台计算机之间使用http协议通信时,在一条通信线路上必定有一端是客户端,另一端则是服务器端.

  > 有时候,按实际情况,两台计算机作为客户端和服务器端的角色有可能会互换.但就仅从一条通信线路来说,服务器端和客户端的角色是确定的,而且http协议能够明确区分那端是客户端,哪端是服务器端.

+ 通过请求和响应的交换达成通信
  ![](/images/http11.png)
  > 下面则是从客户端发送给某个http服务器端的请求报文中的内容.
  ![](/images/http12.png)
  > 起始行开头的get表示请求访问服务器的类型,称为方法method.随后的字符串/index.htm指明了请求访问的资源对象.特教做请求URI.最后的http/1.1,即http的版本号,用来提示客户端使用的http协议功能.

  > 请求报文是由请求方法,请求URI,协议版本,可选的请求首部字段和内容实体构成的
  ![](/images/http13.png)

  > 响应报文基本上由协议版本,状态码,用以解释状态码的原因短语,可选的响应首部字段以及实体主体构成
  ![](/images/http14.png)

+ http是不保存状态的协议
  > http是一种不保存状态,即无状态(stateless)协议.http协议自身不对请求和响应的通信状态进行保存.也就是说在http这个级别,协议对于发送过的请求或者响应都不做持久化处理
  ![](/images/http15.png)
  > 使用http协议,每当有新的请求发送时,就会有对应的新响应产生.协议本身并不保留之前一切的请求或者响应报文的信息.

  > Http/1.1虽然是无状态协议,但为了实现期望的保持状态功能,于是引入了Cookie技术.有了Cookie再用http协议通信,就可以管理状态了.

+ 请求URI定位资源
  > Http协议使用定位互联网上的资源.正是因为URI的特定功能呢个,在互联网上任意位置的资源都能访问到.
  ![](/images/http16.png)
  ![](/images/http17.png)
  > 如果不是访问特定资源而是对服务器本身发起访问,可以用一个*来代替请求URI.例如
      OPTIONS * HTTP/1.1

+ 告知服务器意图的HTTP方法
  - Get:获取资源
  > get方法用来请求访问已被URI识别的资源.指定的资源经服务器端解析返回响应内容.
  ![](/images/http18.png)

  - POST:传输实体的主体
  > 虽然用get方法也可以传输实体的主体,但一般不用get方法进行传输,而是用post方法.虽然说post的功能与get很相似,但posy的主要目的并不是获取响应的主体内容.
    ![](/images/http19.png)
    ![](/images/http20.png)

  - PUT:传输文件
  >put方法用来传输文件,就像ftp协议的文件上传一样.要求在请求报文的主体中包含文件内容,然后保存到请求URI指定的位置.但是,鉴于http/1.1deput方法自身不带验证机制,任何人都可以上传文件,存在安全性问题,因此一般的web网站不使用该方法.
  ![](/images/http21.png)

  - HEAD:获取报文首部
  > HEAD方法和GET方法一样,只是不返回报文主体部分.用于确认的有效性及资源更新的日期时间等.
  ![](/images/http22.png)

  - DELETE:删除文件
  > Delete方法用来删除文件,是与put相反的方法.DELETE方法按请求URI删除指定的资源.但是,http/1.1的delete方法本身同put方法一样不带验证机制,所以一般网站也不使用delete方法.
  ![](/images/http23.png)
  ![](/images/http24.png)

  - OPTIONS:询问支持的方法
  > OPTIONS方法用来查询针对请求URI指定的资源支持的方法.
  ![](/images/http25.png)

  - TRACE:追踪路径
  > Trace方法是让web服务器端将之前的请求通信环回给客户端的方法.
  ![](/images/http26.png)
  ![](/images/http27.png)

  - CONNECT:要求用隧道协议连接代理
  >CONNECT方法要求在与代理服务器通信时简历隧道,实现用隧道协议进行TCP通信.主要使用SSL(安全套接层)和TLS(传输层安全)协议把通信内存加密后经网络隧道传输.

        CONNECT 代理服务器名:端口号 HTTP版本

      >  ![](/images/http28.png)

+ 使用方法下达命令
  > 向请求URI指定的资源发送请求报文时,采用称为方法的命令.方法的作用在于,可以指定请求的资源按期望产生某种行为.方法中有GET,POST和HEAD等
  ![](/images/http29.png)
  方法名区分大小写.
  ![](/images/http30.png)

+ 持久连接节省通信量
  > http协议的初始版本中,没进行一次HTTP通信就要断开一次TCP连接
  ![](/images/http31.png)
  可随着HTTP的普及,文档中包含大量图片的情况多了起来.比如,使用浏览器浏览一个包含多张图片的HTML页面时,在发送请求访问HTML页面资源的同时,也会请求该HTML页面里面包含的其他资源.因为,每次的请求都会造成无谓的TCP建立和断开,增加通信量的开销
  ![](/images/http32.png)

  - 持久连接
  > 为了解决上述TCP连接的问题,HTTP/1.1和一部分的HTTP/1.0想出了持久连接(HTTP Persistent Connections,也称为HTTP keep-alive或HTTPconnection reuse)的方法.持久连接的特点是,只要任意一端没有明确提出断开连接,则保持TCP连接状态
    ![](/images/http33.png)
    持久连接的好处在于减少了TCP连接的重复建立和断开所造成的额外开销,减轻了服务器端的负载.另外,减少开销的那部分时间,使HTTP请求和响应能够更早地结束,这样Web页面的显示速度也就相应提高了.

  - 管线化
  > 持久连接使得多数请求以管线化(pipelining)方式发送称为可能.从前发送请求后需等待并收到响应,才能发送下一个请求.管线化技术出现后,不用等待响应亦可以直接发送下一个请求.
  ![](/images/new.png)

  - 使用Cookie的状态管理
  > HTTP是无状态协议,它不对之前发生过的请求和响应的状态进行管理.也就是说,无法根据之前的状态进行本次的请求处理.
  ![](/images/new2.png)
  ![](/images/new3.png)
  ![](/images/new4.png)
  ![](/images/new5.png)
  ![](/images/new6.png)
  ![](/images/new7.png)
  ![](/images/new8.png)
